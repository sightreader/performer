{"ast":null,"code":"import _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport msgpack from \"@ygoe/msgpack\";\nimport { EnumerateMidiDevicesResponse } from \"./Commands/Command\";\nexport class Client {\n  constructor() {\n    _defineProperty(this, \"socket\", void 0);\n  }\n\n  get Socket() {\n    return this.socket;\n  }\n\n  async connect() {\n    if (!process.browser) {\n      return;\n    }\n\n    return new _Promise((resolve, reject) => {\n      window.client = this;\n      this.socket = new WebSocket(\"ws://localhost:55367\");\n      console.log(\"Opening websocket connection...\");\n\n      this.socket.onerror = event => {\n        console.error(\"[Websocket] Errored:\", event);\n      };\n\n      this.socket.onclose = event => {\n        console.log(\"[Websocket] Closed:\", event);\n      };\n\n      this.socket.onopen = event => {\n        console.log(\"[Websocket] Opened:\", event);\n        resolve();\n      };\n\n      this.socket.onmessage = async event => {\n        var message = msgpack.deserialize((await new Response(event.data).arrayBuffer()));\n        var command = EnumerateMidiDevicesResponse.FromMessagePack(message);\n        console.log(\"[Websocket] Received:\", message);\n      };\n    });\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}